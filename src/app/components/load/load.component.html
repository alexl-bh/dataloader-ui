<app-header></app-header>
<section class="load">
  <h1 class="title" *ngIf="!results">Load</h1>
  <h1 class="title" *ngIf="results">Results</h1>
  <section class="content">
    <section *ngIf="!results">
      <novo-form [form]="fileForm" layout="vertical">
        <div class="novo-form-row">
          <novo-control [form]="fileForm" [control]="fileControl"></novo-control>
        </div>
      </novo-form>
      <novo-table [theme]="'grass'" [rows]="previewTable.rows" [columns]="previewTable.columns" [config]="previewTable.config" #table>
        <novo-table-header class="table-header">
          <h4>Duplicate Checked Columns and File Preview</h4>
        </novo-table-header>
      </novo-table>
      <footer>
        <button theme="primary" class="cancel" [disabled]="previewTable.rows.length === 0 || !saving" color="negative" (click)="cancel()" icon="times">Stop</button>
        <button theme="primary" class="load" [disabled]="previewTable.rows.length === 0" [loading]="saving" (click)="load()" icon="publish">Load</button>
      </footer>
    </section>
    <section *ngIf="results">
      <novo-list class="output-files" direction="vertical">
        <novo-list-item *ngFor="let item of outputFiles">
          <item-header>
            <item-avatar [icon]="item.icon"></item-avatar>
            <item-title>{{item.name}}</item-title>
            <item-header-end>
            <span>
            <i class="bhi-clock"></i>
            {{item.dateCreated}}
            </span>
            </item-header-end>
          </item-header>
          <item-content direction="vertical">
            <p class="errors" *ngIf="item.errors">
              <i class="bhi-caution"></i>
              {{item.errors}} Errors
            </p>
            <p class="warnings" *ngIf="item.warnings">
              <i class="bhi-info"></i>
              {{item.warnings}} Warnings
            </p>
            <p>
              <a class="link" (click)="openFile(item.filePath);">{{item.filePath}}</a>
            </p>
          </item-content>
        </novo-list-item>
      </novo-list>
      <div class="output">{{response}}</div>
    </section>
  </section>
</section>
