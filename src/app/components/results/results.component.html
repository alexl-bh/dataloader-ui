<app-header></app-header>
<section class="results">
  <div class="subtitle">
    <i class="bhi-report"></i>
    <h1>Results</h1>
  </div>
  <novo-nav [outlet]="tabs" direction="horizontal">
    <novo-tab>Overview</novo-tab>
    <novo-tab>Command Line</novo-tab>
  </novo-nav>
  <novo-nav-outlet #tabs>
    <novo-nav-content class="tab-overview">
      <div class="overview">
        <div class="chart">
          <novo-card-chart-donut [value]="loadedPercent" [label]="loadedLabel" color="#662255"></novo-card-chart-donut>
        </div>
        <div class="totals">
          <novo-list direction="vertical">
            <novo-list-item class="total inserted">
              <item-header>
                <item-avatar icon="bhi-star"></item-avatar>
                <item-title><span class="amount">{{ results?.inserted }}</span> INSERTED</item-title>
              </item-header>
            </novo-list-item>
            <novo-list-item class="total updated">
              <item-header>
                <item-avatar icon="bhi-edit"></item-avatar>
                <item-title><span class="amount">{{ results?.updated }}</span> UPDATED</item-title>
              </item-header>
            </novo-list-item>
            <novo-list-item class="total failed">
              <item-header>
                <item-avatar icon="bhi-caution"></item-avatar>
                <item-title><span class="amount">{{ results?.failed }}</span> FAILED</item-title>
              </item-header>
            </novo-list-item>
          </novo-list>
        </div>
      </div>
      <div class="files">
        <novo-list direction="vertical">
          <novo-list-item *ngIf="results?.inserted || results?.updated">
            <item-header>
              <item-avatar icon="bhi-certification"></item-avatar>
              <item-title>Success File</item-title>
              <item-header-end>
                <i class="bhi-clock"></i>
                {{ results?.startTime | date }}
              </item-header-end>
            </item-header>
            <item-content>
              <a class="link" (click)="openFile(results?.successFile);">{{ results?.successFile }}</a>
            </item-content>
          </novo-list-item>
          <novo-list-item *ngIf="results?.failed">
            <item-header>
              <item-avatar icon="bhi-caution"></item-avatar>
              <item-title>Failure File</item-title>
              <item-header-end>
                <i class="bhi-clock"></i>
                {{ results?.durationMsec | date }}
              </item-header-end>
            </item-header>
            <item-content>
              <a class="link" (click)="openFile(results?.failureFile);">{{ results?.failureFile }}</a>
            </item-content>
          </novo-list-item>
          <novo-list-item *ngIf="results?.logFile">
            <item-header>
              <item-avatar icon="bhi-note"></item-avatar>
              <item-title>Log File</item-title>
            </item-header>
            <item-content>
              <a class="link" (click)="openFile(results?.logFile);">{{ results?.logFile }}</a>
            </item-content>
          </novo-list-item>
        </novo-list>
      </div>
      <div class="errors">
        <div class="error" *ngFor="let error of results?.errors">
          Row: {{ error.row }} - ID: {{ error.id }} - Message: {{ error.message }}
        </div>
      </div>
    </novo-nav-content>
    <novo-nav-content class="tab-command-line">
      <div class="output">{{ output }}</div>
    </novo-nav-content>
  </novo-nav-outlet>
  <footer>
    <button theme="primary" class="cancel-button" [disabled]="!running" (click)="stop()" color="negative" icon="times">
      Stop
    </button>
  </footer>
</section>
